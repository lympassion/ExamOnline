# 功能需求

------

<!--以下所列功能需求中，加粗的为初步必需项-->

- ### 所有用户

  - **注册**
  - **登录**
  - **登出**
  - **个人信息查看**
  - **个人信息修改**

- ### 学生用户

  - **查看可参加考试**
    - **选择并开始考试**
    - **提交并结束考试**
  - **查看已参加的考试与成绩**
    - **查看详细答题情况**
    - 再考一次（如果被允许）
  - 查看错题集
  - 查看数据分析
  - 查看我的提问
    - 新建提问
    - 查看历史提问

- ### 教师用户

  - **学生管理**
    - **新增学生信息**
    - 注销学生信息
  - **试题管理**
    - **新增试题**
    - **试题组卷(权限：出题人)**
  - **试卷批改**
  - 回复提问
  - 成绩查看
    - **成绩统计分析**
    - 查看学生试卷

- ### 管理员用户

  - 权限管理
    - 学生补考权限管理
    - 教师出题权限管理
  
  - **考试信息查看**
  - 考试监控查看

# 模块设计

分若干模块：

| 模块名称      | 说明       | 功能                         |
| ------------- | ---------- | ---------------------------- |
| student       | 学生模块   | 学生注册、登录、登出         |
| teacher       | 教师模块   | 创建考试、修改信息、删除考试 |
| question      | 试题模块   | 增加、修改、删除试题         |
| administrator | 管理员模块 | 权限管理、监控管理           |
| ……            |            |                              |

模块均不涉及前端，**所有请求返回JSON**，格式为：

```jsmin
{
    "code": 0,   // 错误码，0表示无错误
    "msg": "",   // 错误信息
    "page": 20,   // 分页数量，仅在某些请求中出现
    "data": {}   // 返回数据，如果出错无此项
}
```

### 错误码：

| 错误码 | 错误信息       | 描述                                                         |
| ------ | -------------- | ------------------------------------------------------------ |
| 101    | 参数不正确     | 缺失了某些必要的参数，或者某些参数的类型不正确               |
| 102    | 实体不存在     | 涉及到的ID在数据库中不存在                                   |
| 103    | 没有权限       | 密码错误，用户尚未登录，或者用户无权进行操作                 |
| 104    | 名字重复       | 添加/注册的实体名字与已有的重复                              |
| 105    | 参数不合法     | 参数语法正确，但是语义不正确（例如创建考试时设置的时间小于当前时间等） |
| 106    | 目标不提供服务 | 考试尚未开始，或者已结束等                                   |

- 对于所有要求ID的API，如果该ID在数据库中不存在，则返回错误102
- 对于所有要求用户登录的API，如果用户没有登录，则返回错误103