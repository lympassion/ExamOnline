# 数据表说明文档

- 注意：所有时间相关的字段均为UNIX时间戳。

------

## student

用于存储学生相关信息。

| 字段         | 类型        | 说明         | 是否必须 | 备注                        |
| ------------ | ----------- | ------------ | -------- | --------------------------- |
| stu_id       | VARCHAR(10) | 学生编号     | 是       | 主键，自增，格式：'S' + num |
| stu_username | VARCHAR(20) | 用户名       | 是       | 唯一                        |
| stu_password | CHAR(32)    | 密码         | 是       | 密码加盐之后的MD5值         |
| stu_realname | VARCHAR(20) | 学生姓名     | 是       |                             |
| stu_class    | INTEGER     | 学生所在班级 | 是       | 表class的外键               |
| stu_gender   | INTEGER     | 学生性别     | 是       | {0: 'male', 1: 'female'}    |

------

## teacher

用于存储教师相关信息。

| 字段         | 类型        | 说明     | 是否必须 | 备注                        |
| ------------ | ----------- | -------- | -------- | --------------------------- |
| tch_id       | VARCHAR(10) | 教师编号 | 是       | 主键，自增，格式：'T' + num |
| tch_username | VARCHAR(20) | 用户名   | 是       | 唯一                        |
| tch_password | CHAR(32)    | 密码     | 是       | 密码加盐之后的MD5值         |
| tch_realname | VARCHAR(20) | 教师姓名 | 是       |                             |
| tch_gender   | INTEGER     | 教师性别 | 是       | {0: 'male', 1: 'female'}    |

------

## class

用于存储班级相关信息。

| 字段       | 类型        | 说明         | 是否必须 | 备注                        |
| ---------- | ----------- | ------------ | -------- | --------------------------- |
| class_id   | VARCHAR(10) | 班级编号     | 是       | 主键，自增，格式：'C' + num |
| class_name | VARCHAR(20) | 班级名称     | 是       | 唯一                        |
| tch_id     | VARCHAR(10) | 班级所属教师 | 是       | 表teacher的外键             |

------

## question

用于存储试题相关信息。

| 字段       | 类型         | 说明                  | 是否必须 | 备注                                                         |
| ---------- | ------------ | --------------------- | -------- | ------------------------------------------------------------ |
| qu_id      | VARCHAR(10)  | 试题编号              | 是       | 主键，自增，格式：'Q' + num                                  |
| qu_type    | INTEGER      | 试题类型              | 是       | {0: '单选题', 1: '多选题', 2: '判断题', 3: '填空题', 4: '主观题'} |
| qu_title   | VARCHAR(255) | 试题的题目            | 是       |                                                              |
| qu_opa     | VARCHAR(255) | 如果是选择则代表A选项 | 否       | 单选                                                         |
| qu_opb     | VARCHAR(255) | 如果是选择则代表B选项 | 否       | 根据具体题型决定是否为空                                     |
| qu_opc     | VARCHAR(255) | 如果是选择则代表C选项 | 否       | 根据具体题型决定是否为空                                     |
| qu_opd     | VARCHAR(255) | 如果是选择则代表D选项 | 否       | 根据具体题型决定是否为空                                     |
| qu_opright | VARCHAR(255) | 正确选项/正确答案     | 否       | 单选: 字符，多选/填空: 字符串，判断: 字符(T/F)，其余为空     |
| qu_score   | INTEGER      | 试题分值              | 是       |                                                              |

------

## exampaper

用于存储试卷相关信息。

| 字段     | 类型         | 说明     | 是否必须 | 备注                        |
| -------- | ------------ | -------- | -------- | --------------------------- |
| ep_id    | VARCHAR(10)  | 试卷编号 | 是       | 主键，自增，格式：'P' + num |
| ep_title | VARCHAR(255) | 试卷名称 | 是       |                             |
| ep_score | INTEGER      | 试卷总分 | 否       |                             |

------

## exam

用于存储考试相关信息。

| 字段           | 类型          | 说明         | 是否必须 | 备注                        |
| -------------- | ------------- | ------------ | -------- | --------------------------- |
| exam_id        | VARCHAR(10)   | 考试编号     | 是       | 主键，自增，格式：'E' + num |
| exam_title     | VARCHAR(255)  | 考试名称     | 是       |                             |
| ep_id          | VARCHAR(10)   | 对应试卷编号 | 是       | 表exampaper的外键           |
| exam_begintime | TIMESTAMP(14) | 考试开始时间 | 是       |                             |
| exam_endtime   | TIMESTAMP(14) | 考试结束时间 | 是       |                             |

------

## ep_qu

用于存储试卷和试题的对应关系。

| 字段  | 类型        | 说明     | 是否必须 | 备注                    |
| ----- | ----------- | -------- | -------- | ----------------------- |
| ep_id | VARCHAR(10) | 试卷编号 | 是       | 主键，表exampaper的外键 |
| qu_id | VARCHAR(10) | 试题编号 | 是       | 主键，表question的外键  |
|       |             |          |          |                         |

------

## subjectivity

<!--TODO-->

<!--逻辑错误：因为教师评分为NOT NULL，所以回答和评分无法在一张表中存储-->

用于存储主观题答题情况~~和教师打分的~~相关情况。

| 字段         | 类型         | 说明                   | 是否必须 | 备注                    |
| ------------ | ------------ | ---------------------- | -------- | ----------------------- |
| stu_id       | VARCHAR(10)  | 作答该主观题的学生编号 | 是       | 主键，表student的外键   |
| ep_id        | VARCHAR(10)  | 该主观题所在的试卷编号 | 是       | 主键，表exampaper的外键 |
| qu_id        | VARCHAR(10)  | 试题编号               | 是       | 主键，表question的外键  |
| qu_ans       | VARCHAR(256) | 主观题回答             | 否       |                         |
| ~~qu_score~~ | ~~INTEGER~~  | ~~教师评分~~           | ~~是~~   | ~~<= 对应试题分值~~     |

------

## exam_record

<!--TODO-->

<!--视主观题相关存储方案而定-->

用于存储考试记录（除主观题外）相关信息。

| 字段         | 类型         | 说明           | 是否必须 | 备注                        |
| ------------ | ------------ | -------------- | -------- | --------------------------- |
| record_id    | VARCHAR(10)  | 考试记录编号   | 是       | 主键，自增，格式：'R' + num |
| record_title | VARCHAR(255) | 考试名称       | 是       |                             |
| stu_id       | VARCHAR(10)  | 作答的学生编号 | 是       | 表student的外键             |
| ep_id        | VARCHAR(10)  | 对应试卷编号   | 是       | 表exampaper的外键           |
| ans_rec      | VARCHAR(255) | 答题记录       | 是       | eg: 'A,B,B,AD,ACD'          |
| exam_score   | INTEGER      | 得分           | 是       |                             |